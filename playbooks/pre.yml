---
- hosts: "{{ bastion_group | d('bastion') }}"
  collections:
    - opennebula.deploy
  roles:
    - role: bastion
      delegate_to: localhost
      become: false
      tags: [bastion]

- hosts: "{{ frontend_group | d('frontend') }}:{{ node_group | d('node') }}"
  strategy: linear
  collections:
    - opennebula.deploy
  roles:
    - role: python3

- hosts: "{{ frontend_group | d('frontend') }}:{{ node_group | d('node') }}"
  collections:
    - opennebula.deploy
  roles:
    - role: facts
      tags: [always]

    - role: precheck
